<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
	<div>
    	<p id="announcer"> Press the button to play. </p>
        <p id="timer"> 0000 ms </p>
        <button id="playbutton"> Play. </button> 
    </div>
</body>
<script>

const button = document.getElementById("playbutton")
const announcer = document.getElementById("announcer")
const timer = document.getElementById("timer")
var now = false;
var playing = false;
let interval;
let i;

button.addEventListener('click', () => {
	if(now === false && playing === true) {
        clearTimeout(i)
    }
	play()
})



function begincount() {
	let ms = 0
	interval = setInterval(function() {
    	timer.innerHTML = `${ms++} ms`
    },1)
}

function play() {
	if(playing === false) {
// ------v
		playing = true
		button.innerHTML = "Get ready.";
		let delay = Math.floor(Math.random() * (Math.floor(Math.random() * 7000)) + 3000)
    	i = setTimeout(() => {
    		document.body.style.backgroundColor = "rgb(180,255,100)";
        	now = true
        	button.innerHTML = "Click now!";
        	begincount()
    	},delay)
        i
        
// ------^
 	} else if (playing === true) {
    	now = false
        playing = false
    	clearInterval(interval)
        document.body.style.backgroundColor = "rgb(224,206,181)"
        button.innerHTML = "Retry?"
    }
}

</script>
<style>
body {
    background-color: rgb(224, 206, 181);
    position: relative;
}

div {
	text-align: center;
}

button {
	width: 300px;
    height: 300px;
}
</style>

<div class="rockbottom" style="position: absolute; bottom: 15px;">
    <button onclick="location.href='index.html'" style="height: 70px; width: 70px;"> Back </button>
</div>
</html>